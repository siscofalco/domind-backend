(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(15),c=n.n(s),o=(n(100),n(9)),r=n(30),l=n(14),u=n(5),d=n(6),h=n(11),j=n(10),b=n(162),v=n(163),m=n(64),p=n.n(m),x=n(78),O=n(25),f=n.n(O),g=function(){function e(){Object(u.a)(this,e),this.instance=f.a.create({baseURL:"".concat("https://domind.herokuapp.com/api","/auth"),withCredentials:!0})}return Object(d.a)(e,[{key:"signupPatient",value:function(e){return this.instance.post("/signup-patient",e)}},{key:"signup",value:function(e){return this.instance.post("/signup-doctor",e)}},{key:"login",value:function(e){return this.instance.post("/login",e)}},{key:"logout",value:function(){return this.instance.post("/logout")}},{key:"isLoggedIn",value:function(){return this.instance.get("/loggedin")}},{key:"edit",value:function(e){return this.instance.post("/edit",e)}}]),e}(),y=n(41),C=n.n(y),w=n(1),k=i.a.createContext(),S=k.Consumer,N=k.Provider,M=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={isLoggedIn:!1,isLoading:!0,user:null},e.AuthService=new g,e.signup=function(){var t=Object(x.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.AuthService.signup(n);case 3:(a=t.sent)&&e.setState({isLoggedIn:!0,user:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.setState({isLoggedIn:!1,user:null});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.login=function(t){e.AuthService.login(t).then((function(t){return e.setState({isLoggedIn:!0,user:t.data})})).catch((function(){return e.setState({isLoggedIn:!1,user:null})}))},e.logout=function(){e.AuthService.logout().then((function(){return e.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.error(e)}))},e.edit=function(t){e.AuthService.edit(t).then((function(t){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{user:t.data}))})).catch((function(e){return console.error(e)}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.AuthService.isLoggedIn().then((function(t){t&&e.setState({isLoggedIn:!0,isLoading:!1,user:t})})).catch((function(){e.setState({isLoggedIn:!1,isLoading:!1,user:null})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,n=e.isLoading,a=e.user;return n?Object(w.jsx)("div",{className:"loadingContainer",children:Object(w.jsx)(C.a,{})}):Object(w.jsx)(N,{value:{isLoading:n,isLoggedIn:t,user:a,signup:this.signup,login:this.login,logout:this.logout,edit:this.edit},children:this.props.children})}}]),n}(i.a.Component),D=function(e){return function(t){return Object(w.jsx)(S,{children:function(n){var a=n.isLoading,i=n.isLoggedIn,s=n.user,c=n.signup,o=n.login,r=n.logout,u=n.edit;return Object(w.jsx)(e,Object(l.a)({isLoggedIn:i,isLoading:a,user:s,signup:c,login:o,logout:r,edit:u},t))}})}},A=(n(125),{username:function(e){},password:function(e){var t;return e?e.length<3&&(t="Invalid password"):t="Password is required",t}}),P=D(function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={fields:{username:"",password:""},errors:{username:null,password:null}},a}return Object(d.a)(n,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.login(this.state.fields)}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState({fields:Object(l.a)(Object(l.a)({},this.state.fields),{},Object(r.a)({},n,a)),errors:Object(l.a)(Object(l.a)({},this.state.errors),{},Object(r.a)({},n,A[n](a)))})}},{key:"render",value:function(){var e=this,t=this.state.fields;return Object(w.jsxs)("div",{className:"login",children:[Object(w.jsx)("span",{className:"title",children:"Domind"}),Object(w.jsx)("span",{className:"subtitle",children:"Mental health noseque"}),Object(w.jsxs)("form",{className:"form",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"text",placeholder:"Username",name:"username",value:t.username,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"password",placeholder:"Password",name:"password",value:t.password,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)(v.a,{variant:"outlined",color:"primary",type:"submit",children:"Log in"})]}),Object(w.jsx)("a",{className:"footer",href:"/signup",children:"Are you a doctor? Create your account here"})]})}}]),n}(a.Component)),L=function(){return(new g).logout().then((function(){window.location.href="/login"})),""},I=(n(126),/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/),V={username:function(e){var t;return e||(t="Username is required"),t},name:function(e){var t;return e||(t="Name is required"),t},email:function(e){var t;return e?I.test(e)||(t="Invalid email"):t="Email is required",t},password:function(e){var t;return e?e.length<3&&(t="Invalid password"):t="Password is required",t},mobilephone:function(e){var t;return e?e.length<9&&(t="Invalid phone number"):t="Phone number is required",t}},R=D(function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={fields:{username:"",name:"",email:"",password:"",mobilephone:null},errors:{username:null,name:null,email:null,password:null,mobilephone:null}},a}return Object(d.a)(n,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=Object(l.a)({},this.state.fields);this.props.signup(t)}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState({fields:Object(l.a)(Object(l.a)({},this.state.fields),{},Object(r.a)({},n,a)),errors:Object(l.a)(Object(l.a)({},this.state.errors),{},Object(r.a)({},n,V[n](a)))})}},{key:"render",value:function(){var e=this,t=this.state.fields;return Object(w.jsx)("div",{className:"signup",children:Object(w.jsxs)("form",{className:"form",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"text",placeholder:"Username",name:"username",value:t.username,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"text",placeholder:"Name",name:"name",value:t.name,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"password",placeholder:"Password",name:"password",value:t.password,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"tel",placeholder:"Mobile Phone",name:"mobilephone",value:t.mobilephone,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"text",placeholder:"Email",name:"email",value:t.email,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)(v.a,{type:"submit",variant:"outlined",color:"primary",children:"Create user"})]})})}}]),n}(a.Component)),T=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,q={username:function(e){var t;return e||(t="Username is required"),t},name:function(e){var t;return e||(t="Name is required"),t},birthdate:function(e){var t;return e||(t="Birthdate is required"),t},email:function(e){var t;return e?T.test(e)||(t="Invalid email"):t="Email is required",t},password:function(e){var t;return e?e.length<5&&(t="Invalid password"):t="Password is required",t}},z=D(function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={fields:{username:"",name:"",email:"",password:"",birthdate:null},errors:{username:null,name:null,email:null,password:null,birthdate:null}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=Object(l.a)({},this.state.fields);(new g).signupPatient(t).then((function(){window.location.reload()}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState({fields:Object(l.a)(Object(l.a)({},this.state.fields),{},Object(r.a)({},n,a)),errors:Object(l.a)(Object(l.a)({},this.state.errors),{},Object(r.a)({},n,q[n](a)))})}},{key:"render",value:function(){var e=this;return this.props.user&&this.props.user.data&&Array.isArray(this.props.user.data.patients)?Object(w.jsx)("div",{className:"signup",children:Object(w.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"text",placeholder:"Username",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"text",placeholder:"Name",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"date",placeholder:"Birthdate",name:"birthdate",value:this.state.birthdate,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)("div",{className:"form-item",children:Object(w.jsx)(b.a,{type:"text",placeholder:"Email",name:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)}})}),Object(w.jsx)(v.a,{type:"submit",variant:"outlined",color:"primary",children:"Create patient"})]})}):Object(w.jsx)(o.a,{to:"/user-selector"})}}]),n}(a.Component));var E=D((function(e){var t=e.isLoggedIn,n=e.isLoading,a=e.exact,i=e.path,s=e.redirectPath,c=void 0===s?"/user-selector":s,r=e.component;return n?Object(w.jsx)("p",{children:"Loading..."}):Object(w.jsx)(o.b,{exact:a,path:i,render:function(e){return t?Object(w.jsx)(o.a,{to:c}):t?void 0:Object(w.jsx)(r,Object(l.a)({},e))}})}));var U=D((function(e){var t=e.isLoggedIn,n=e.isLoading,a=e.exact,i=e.path,s=e.component;return n?Object(w.jsx)("div",{className:"loadingContainer",children:Object(w.jsx)(C.a,{})}):Object(w.jsx)(o.b,{exact:a,path:i,render:function(e){return t?t?Object(w.jsx)(s,Object(l.a)({},e)):void 0:Object(w.jsx)(o.a,{to:"/login"})}})})),_=D((function(e){return e.user.data?Array.isArray(e.user.data.patients)?Object(w.jsx)(o.a,{to:"/doctor-profile/".concat(e.user.data._id)}):Object(w.jsx)(o.a,{to:"/patient-profile/".concat(e.user.data._id)}):(setTimeout((function(){window.location.reload()}),200),Object(w.jsx)("div",{className:"loadingContainer",children:Object(w.jsx)(C.a,{})}))})),B=(n(129),function(){function e(){Object(u.a)(this,e),this.instance=f.a.create({baseURL:"".concat("https://domind.herokuapp.com/api","/doctor"),withCredentials:!0})}return Object(d.a)(e,[{key:"getDoctor",value:function(e){return this.instance.get("/".concat(e))}},{key:"editDoctor",value:function(e){return this.instance.put("/edit",e)}}]),e}()),F=n(83),Q=n.n(F),$=(n(77),function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){return!0===this.props.visible?Object(w.jsx)("div",{className:"modal-background",onClick:this.props.onModalClose,children:Object(w.jsxs)("div",{className:"modal-container",onClick:function(e){e.stopPropagation()},children:[Object(w.jsx)("div",{className:"modalCloseButton",onClick:this.props.onModalClose,children:Object(w.jsx)(Q.a,{})}),this.props.children]})}):null}}]),n}(a.Component)),J=n(26),Y=n.n(J),G=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;Object(u.a)(this,n),a=t.call(this,e);var i=e.content,s=i.name,c=i.username,o=i.email,r=i.mobilephone;return a.state={name:s,username:c,email:o,mobilephone:r,isSuccess:!1},a}return Object(d.a)(n,[{key:"onUsernameChange",value:function(e){this.setState({username:e})}},{key:"onNameChange",value:function(e){this.setState({name:e})}},{key:"onEmailChange",value:function(e){this.setState({email:e})}},{key:"onMobilephoneChange",value:function(e){this.setState({mobilephone:e})}},{key:"editDoctor",value:function(){var e=this;(new B).editDoctor({username:this.state.username,name:this.state.name,email:this.state.email,mobilephone:this.state.mobilephone}).then((function(){e.setState({isSuccess:!0})}))}},{key:"render",value:function(){var e=this;return this.state.isSuccess?Object(w.jsx)(Y.a,{}):Object(w.jsxs)("div",{className:"modalBody",children:[Object(w.jsxs)("div",{className:"modalRow",children:[Object(w.jsx)("label",{children:"Username:"}),Object(w.jsx)(b.a,{value:this.state.username,onChange:function(t){e.onUsernameChange(t.target.value)}})]}),Object(w.jsxs)("div",{className:"modalRow",children:[Object(w.jsx)("label",{children:"Name:"}),Object(w.jsx)(b.a,{value:this.state.name,onChange:function(t){e.onNameChange(t.target.value)}})]}),Object(w.jsxs)("div",{className:"modalRow",children:[Object(w.jsx)("label",{children:"Email:"}),Object(w.jsx)(b.a,{value:this.state.email,onChange:function(t){e.onEmailChange(t.target.value)}})]}),Object(w.jsxs)("div",{className:"modalRow",children:[Object(w.jsx)("label",{children:"Mobilephone:"}),Object(w.jsx)(b.a,{value:this.state.mobilephone,type:"tel",onChange:function(t){e.onMobilephoneChange(t.target.value)}})]}),Object(w.jsx)(v.a,{variant:"outlined",color:"primary",onClick:function(){e.editDoctor(e)},children:"Send"})]})}}]),n}(a.Component),H=n(84),K=n.n(H),W=n(58),X=n.n(W),Z=(n(63),function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={doctor:{patients:[]},isEditDoctorModalVisible:!1},a}return Object(d.a)(n,[{key:"getDoctorData",value:function(){var e=this,t=this.props.match.params.id;(new B).getDoctor(t).then((function(t){e.setState({doctor:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.getDoctorData()}},{key:"onModalClose",value:function(){this.getDoctorData(),this.setState({isEditDoctorModalVisible:!1})}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"userDetails",children:[Object(w.jsx)("h1",{children:this.state.doctor.name}),Object(w.jsxs)("div",{className:"userDetailsRow",children:[Object(w.jsx)("span",{children:this.state.doctor.email}),Object(w.jsx)("span",{children:this.state.doctor.mobilephone}),Object(w.jsx)("div",{onClick:function(){e.setState({isEditDoctorModalVisible:!0})},children:Object(w.jsx)(X.a,{})})]})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"sectionTitleContainer",children:Object(w.jsx)("h2",{className:"sectionTitle",children:"Patients"})}),Object(w.jsx)("div",{className:"list",children:this.state.doctor.patients.map((function(e){return Object(w.jsxs)("div",{className:"listRow",children:[Object(w.jsx)("span",{className:"listRowTitle",children:e.name}),Object(w.jsx)("a",{href:"/patient-details/".concat(e._id),children:Object(w.jsx)(K.a,{})})]})}))})]}),Object(w.jsx)($,{visible:this.state.isEditDoctorModalVisible,onModalClose:function(){e.onModalClose(e)},children:Object(w.jsx)(G,{content:this.state.doctor})})]})}}]),n}(a.Component)),ee=Object(o.f)(D(Z)),te=function(){function e(){Object(u.a)(this,e),this.instance=f.a.create({baseURL:"".concat("https://domind.herokuapp.com/api","/patient"),withCredentials:!0})}return Object(d.a)(e,[{key:"getPatient",value:function(e){return this.instance.get("/".concat(e))}},{key:"editPatient",value:function(e,t){return this.instance.put("/edit/".concat(e),t)}},{key:"deletePatient",value:function(e){return this.instance.delete("/".concat(e))}}]),e}(),ne=function(){function e(){Object(u.a)(this,e),this.instance=f.a.create({baseURL:"".concat("https://domind.herokuapp.com/api","/diary"),withCredentials:!0})}return Object(d.a)(e,[{key:"createDiary",value:function(e){return this.instance.post("/create",e)}},{key:"getDiary",value:function(e){return this.instance.get("/".concat(e))}},{key:"deleteDiary",value:function(e){return this.instance.delete("/".concat(e))}}]),e}(),ae=function(){function e(){Object(u.a)(this,e),this.instance=f.a.create({baseURL:"".concat("https://domind.herokuapp.com/api","/activity"),withCredentials:!0})}return Object(d.a)(e,[{key:"createActivity",value:function(e){return this.instance.post("/create",e)}},{key:"getActivity",value:function(e){return this.instance.get("/".concat(e))}},{key:"editActivity",value:function(e,t){return this.instance.put("/edit/".concat(e),t)}},{key:"deleteActivity",value:function(e){return this.instance.delete("/".concat(e))}}]),e}(),ie=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={answers:[],isSuccess:!1},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props.content);var e=this.props.content.questions.map((function(){return""}));this.setState({answers:e})}},{key:"onAnswerChange",value:function(e,t){var n=this.state.answers;n[t]=e,this.setState({answers:n})}},{key:"sendAnswers",value:function(){var e=this;(new ae).editActivity(this.props.content._id,{answers:this.state.answers}).then((function(){e.setState({isSuccess:!0})}))}},{key:"render",value:function(){var e=this;return this.state.isSuccess?Object(w.jsx)(Y.a,{}):Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{children:this.props.content.questions.map((function(t,n){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:t}),Object(w.jsx)("input",{type:"text",onChange:function(t){e.onAnswerChange(t.target.value,n)}})]})}))}),Object(w.jsx)("button",{onClick:function(){e.sendAnswers(e)},children:"Send answers"})]})}}]),n}(a.Component),se=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).props.content&&a.props.content.comment?a.state={text:a.props.content.comment,isSuccess:!1}:a.state={text:"",isSuccess:!1},a}return Object(d.a)(n,[{key:"onTextChange",value:function(e){this.setState({text:e})}},{key:"createDiary",value:function(){var e=this;(new ne).createDiary({comment:this.state.text,patient:this.props.patientId}).then((function(){e.setState({isSuccess:!0})}))}},{key:"render",value:function(){var e=this;return this.state.isSuccess?Object(w.jsx)(Y.a,{}):Object(w.jsxs)("div",{className:"textModal",children:[Object(w.jsx)("textarea",{readOnly:!this.props.isNew,value:this.state.text,onChange:function(t){e.onTextChange(t.target.value)}}),this.props.isNew?Object(w.jsx)(v.a,{onClick:function(){e.createDiary(e)},children:"Send"}):null]})}}]),n}(a.Component),ce=function(e){var t=new Date(e),n=t.getDate();n="".concat(n<10?0:"").concat(n);var a=t.getMonth()+1;a="".concat(a<10?0:"").concat(a);var i=t.getFullYear();return"".concat(n,"/").concat(a,"/").concat(i)},oe=function(e){var t=new Date(e),n=t.getDate();n="".concat(n<10?0:"").concat(n);var a=t.getMonth()+1;a="".concat(a<10?0:"").concat(a);var i=t.getFullYear();return"".concat(i,"-").concat(a,"-").concat(n)},re=n(50),le=n.n(re),ue=n(85),de=n.n(ue),he=n(86),je=n.n(he),be=n(46),ve=n.n(be),me=n(51),pe=n.n(me),xe=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={patient:{activities:[],diary:[]},isActivityModalVisible:!1,currentActivity:{},isDiaryModalVisible:!1,currentDiary:{}},a}return Object(d.a)(n,[{key:"getPatientData",value:function(){var e=this,t=this.props.match.params.id;(new te).getPatient(t).then((function(t){e.setState({patient:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.getPatientData()}},{key:"openActivityModal",value:function(e){this.setState({isActivityModalVisible:!0,currentActivity:e})}},{key:"openDiaryModal",value:function(e){this.setState({isDiaryModalVisible:!0,currentDiary:e})}},{key:"newDiary",value:function(){this.setState({isDiaryModalVisible:!0,currentDiary:{}})}},{key:"onCloseModal",value:function(){this.getPatientData(),this.setState({isActivityModalVisible:!1,isDiaryModalVisible:!1})}},{key:"deleteDiary",value:function(e){var t=this,n=e._id;(new ne).deleteDiary(n).then((function(){t.getPatientData()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"userDetails",children:[Object(w.jsx)("h1",{children:this.state.patient.name}),Object(w.jsx)("div",{className:"userDetailsRow",children:Object(w.jsx)("span",{children:this.state.patient.email})})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"sectionTitleContainer",children:Object(w.jsx)("h2",{className:"sectionTitle",children:"Activities"})}),"                    ",Object(w.jsx)("div",{className:"list",children:this.state.patient.activities.map((function(t){return Object(w.jsxs)("div",{className:"listRow",children:[Object(w.jsx)("span",{className:"listRowTitle",children:ce(t.date)}),t.answers&&t.answers.length?Object(w.jsx)(je.a,{}):Object(w.jsx)("div",{onClick:function(){e.openActivityModal(t)},children:Object(w.jsx)(de.a,{})})]})}))})]}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"sectionTitleContainer",children:[Object(w.jsx)("h2",{className:"sectionTitle",children:"Diaries"}),Object(w.jsx)("div",{onClick:function(){e.newDiary()},children:Object(w.jsx)(le.a,{})})]}),Object(w.jsx)("div",{className:"list",children:this.state.patient.diary.map((function(t){return Object(w.jsxs)("div",{className:"listRow",children:[Object(w.jsxs)("div",{className:"listPack",children:[Object(w.jsx)("span",{className:"listRowTitle",children:ce(t.date)}),Object(w.jsx)("div",{onClick:function(){e.openDiaryModal(t)},children:Object(w.jsx)(pe.a,{})})]}),Object(w.jsx)("div",{onClick:function(){e.deleteDiary(t)},children:Object(w.jsx)(ve.a,{})})]})}))})]}),Object(w.jsx)($,{visible:this.state.isActivityModalVisible,onModalClose:function(){e.onCloseModal(e)},children:Object(w.jsx)(ie,{content:this.state.currentActivity})}),Object(w.jsx)($,{visible:this.state.isDiaryModalVisible,onModalClose:function(){e.onCloseModal(e)},children:Object(w.jsx)(se,{content:this.state.currentDiary,isNew:!this.state.currentDiary||!this.state.currentDiary.comment,patientId:this.state.patient._id})})]})}}]),n}(a.Component),Oe=Object(o.f)(D(xe)),fe=function(){function e(){Object(u.a)(this,e),this.instance=f.a.create({baseURL:"".concat("https://domind.herokuapp.com/api","/doctor-session"),withCredentials:!0})}return Object(d.a)(e,[{key:"createSession",value:function(e){return this.instance.post("/create",e)}},{key:"getSession",value:function(e){return this.instance.get("/".concat(e))}},{key:"deleteSession",value:function(e){return this.instance.delete("/".concat(e))}}]),e}(),ge=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.content.answers&&this.props.content.answers.length;return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"modalTitle",children:"Activity"}),Object(w.jsx)("div",{children:this.props.content.questions.map((function(n,a){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:n}),Object(w.jsx)("p",{children:t?e.props.content.answers[a]:"No answer"})]})}))})]})}}]),n}(a.Component),ye=n(60),Ce=n(87),we=n.n(Ce),ke=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={questions:[""],isSuccess:!1},a}return Object(d.a)(n,[{key:"onTextChange",value:function(e,t){var n=Object(ye.a)(this.state.questions);n[t]=e,this.setState({questions:n})}},{key:"addNewQuestion",value:function(){var e=Object(ye.a)(this.state.questions);e.push(""),this.setState({questions:e})}},{key:"sendQuestions",value:function(){var e=this,t=Object(ye.a)(this.state.questions).filter((function(e){return e.length>0}));t.length>0&&(new ae).createActivity({questions:t,patient:this.props.patientId}).then((function(){e.setState({isSuccess:!0})}))}},{key:"render",value:function(){var e=this;return this.state.isSuccess?Object(w.jsx)(Y.a,{}):Object(w.jsxs)("div",{className:"createActivityModal",children:[Object(w.jsx)("div",{className:"createActivityModalList",children:this.state.questions.map((function(t,n){return Object(w.jsxs)("div",{className:"modalRow",children:[Object(w.jsx)(b.a,{placeholder:"Question...",value:t,onChange:function(t){e.onTextChange(t.target.value,n)}}),n===e.state.questions.length-1?Object(w.jsx)("div",{onClick:function(){e.addNewQuestion(e)},children:Object(w.jsx)(we.a,{})}):null]})}))}),Object(w.jsx)(v.a,{variant:"outlined",color:"primary",onClick:function(){e.sendQuestions(e)},children:"Send"})]})}}]),n}(a.Component),Se=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).props.content&&a.props.content.comment?a.state={text:a.props.content.comment,isSuccess:!1}:a.state={text:"",isSuccess:!1},a}return Object(d.a)(n,[{key:"onTextChange",value:function(e){this.setState({text:e})}},{key:"createSession",value:function(){var e=this;(new fe).createSession({comment:this.state.text,patient:this.props.patientId}).then((function(){e.setState({isSuccess:!0})}))}},{key:"render",value:function(){var e=this;return this.state.isSuccess?Object(w.jsx)(Y.a,{}):Object(w.jsxs)("div",{className:"textModal",children:[Object(w.jsx)("textarea",{readOnly:!this.props.isNew,value:this.state.text,onChange:function(t){e.onTextChange(t.target.value)}}),this.props.isNew?Object(w.jsx)(v.a,{onClick:function(){e.createSession(e)},children:"Send"}):null]})}}]),n}(a.Component),Ne=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;Object(u.a)(this,n),a=t.call(this,e);var i=e.content,s=i.name,c=i.username,o=i.email,r=i.birthdate;return console.log(oe(r)),a.state={name:s,username:c,email:o,birthdate:oe(r),isSuccess:!1},a}return Object(d.a)(n,[{key:"onUsernameChange",value:function(e){this.setState({username:e})}},{key:"onNameChange",value:function(e){this.setState({name:e})}},{key:"onEmailChange",value:function(e){this.setState({email:e})}},{key:"onBirthdateChange",value:function(e){this.setState({birthdate:e})}},{key:"editPatient",value:function(){var e=this;(new te).editPatient(this.props.content._id,{username:this.state.username,name:this.state.name,email:this.state.email,birthdate:new Date(this.state.birthdate)}).then((function(){e.setState({isSuccess:!0})}))}},{key:"render",value:function(){var e=this;return this.state.isSuccess?Object(w.jsx)(Y.a,{}):Object(w.jsxs)("div",{className:"modalBody",children:[Object(w.jsxs)("div",{className:"modalRow",children:[Object(w.jsx)("label",{children:"Username:"}),Object(w.jsx)(b.a,{value:this.state.username,onChange:function(t){e.onUsernameChange(t.target.value)}})]}),Object(w.jsxs)("div",{className:"modalRow",children:[Object(w.jsx)("label",{children:"Name:"}),Object(w.jsx)(b.a,{value:this.state.name,onChange:function(t){e.onNameChange(t.target.value)}})]}),Object(w.jsxs)("div",{className:"modalRow",children:[Object(w.jsx)("label",{children:"Email:"}),Object(w.jsx)(b.a,{value:this.state.email,onChange:function(t){e.onEmailChange(t.target.value)}})]}),Object(w.jsxs)("div",{className:"modalRow",children:[Object(w.jsx)("label",{children:"Birthdate:"}),Object(w.jsx)(b.a,{value:this.state.birthdate,type:"date",onChange:function(t){e.onBirthdateChange(t.target.value)}})]}),Object(w.jsx)(v.a,{variant:"outlined",color:"primary",onClick:function(){e.editPatient(e)},children:"Send"})]})}}]),n}(a.Component),Me=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={patient:{activities:[],sessions:[]},isSeeActivityModalVisible:!1,currentActivity:{},isCreateActivityModalVisible:!1,isSessionModalVisible:!1,isEditPatientModalVisible:!1},a}return Object(d.a)(n,[{key:"getPatientData",value:function(){var e=this,t=this.props.match.params.id;(new te).getPatient(t).then((function(t){e.setState({patient:t.data})})).catch((function(e){console.log(e)}))}},{key:"seeActivityModal",value:function(e){this.setState({isSeeActivityModalVisible:!0,currentActivity:e})}},{key:"onModalClose",value:function(){this.getPatientData(),this.setState({isCreateActivityModalVisible:!1,isSessionModalVisible:!1,isEditPatientModalVisible:!1,currentSession:{}})}},{key:"componentDidMount",value:function(){this.getPatientData()}},{key:"seeSessionModal",value:function(e){this.setState({isSessionModalVisible:!0,currentSession:e})}},{key:"deleteActivity",value:function(e){var t=this,n=e._id;(new ae).deleteActivity(n).then((function(){t.getPatientData()})).catch((function(e){console.log(e)}))}},{key:"deleteSession",value:function(e){var t=this,n=e._id;(new fe).deleteSession(n).then((function(){t.getPatientData()})).catch((function(e){console.log(e)}))}},{key:"deletePatient",value:function(){var e=this.state.patient._id;(new te).deletePatient(e).then((function(){window.location.href="/user-selector"})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"userDetails",children:[Object(w.jsx)("h1",{children:this.state.patient.name}),Object(w.jsxs)("div",{className:"userDetailsRow",children:[Object(w.jsxs)("div",{className:"listPack",children:[Object(w.jsx)("span",{children:this.state.patient.email}),Object(w.jsx)("div",{onClick:function(){e.setState({isEditPatientModalVisible:!0})},children:Object(w.jsx)(X.a,{})})]}),Object(w.jsx)("div",{onClick:function(){e.deletePatient(e)},children:Object(w.jsx)(ve.a,{})})]})]}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"sectionTitleContainer",children:[Object(w.jsx)("h2",{className:"sectionTitle",children:"Activities"}),Object(w.jsx)("div",{onClick:function(){e.setState({isCreateActivityModalVisible:!0})},children:Object(w.jsx)(le.a,{})})]}),Object(w.jsx)("div",{className:"list",children:this.state.patient.activities.map((function(t){return Object(w.jsxs)("div",{className:"listRow",children:[Object(w.jsxs)("div",{className:"listPack",children:[Object(w.jsx)("span",{className:"listRowTitle",children:ce(t.date)}),Object(w.jsx)("div",{onClick:function(){e.seeActivityModal(t)},children:Object(w.jsx)(pe.a,{})})]}),Object(w.jsx)("div",{onClick:function(){e.deleteActivity(t)},children:Object(w.jsx)(ve.a,{})})]})}))}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"sectionTitleContainer",children:[Object(w.jsx)("h2",{className:"sectionTitle",children:"Sessions"}),Object(w.jsx)("div",{onClick:function(){e.setState({isSessionModalVisible:!0})},children:Object(w.jsx)(le.a,{})})]}),Object(w.jsx)("div",{className:"list",children:this.state.patient.sessions.map((function(t){return Object(w.jsxs)("div",{className:"listRow",children:[Object(w.jsxs)("div",{className:"listPack",children:[Object(w.jsx)("span",{className:"listRowTitle",children:ce(t.date)}),Object(w.jsx)("div",{onClick:function(){e.seeSessionModal(t)},children:Object(w.jsx)(pe.a,{})})]}),Object(w.jsx)("div",{onClick:function(){e.deleteSession(t)},children:Object(w.jsx)(ve.a,{})})]})}))})]})]}),Object(w.jsx)($,{visible:this.state.isSeeActivityModalVisible,onModalClose:function(){e.setState({isSeeActivityModalVisible:!1})},children:Object(w.jsx)(ge,{content:this.state.currentActivity})}),Object(w.jsx)($,{visible:this.state.isCreateActivityModalVisible,onModalClose:function(){e.onModalClose(e)},children:Object(w.jsx)(ke,{patientId:this.state.patient._id})}),Object(w.jsx)($,{visible:this.state.isSessionModalVisible,onModalClose:function(){e.onModalClose(e)},children:Object(w.jsx)(Se,{content:this.state.currentSession,isNew:!this.state.currentSession||!this.state.currentSession.comment,patientId:this.state.patient._id})}),Object(w.jsx)($,{visible:this.state.isEditPatientModalVisible,onModalClose:function(){e.onModalClose(e)},children:Object(w.jsx)(Ne,{content:this.state.patient})})]})}}]),n}(a.Component),De=Object(o.f)(D(Me)),Ae=n(88),Pe=n.n(Ae),Le=n(89),Ie=n.n(Le),Ve=n(90),Re=n.n(Ve),Te=(n(130),D((function(e){if(!e.user||!e.user.data||!e.user.data.username)return null;var t=function(e){window.location.href=e};return Object(w.jsxs)("div",{className:"navbar-container",children:[Object(w.jsx)("div",{className:"navbar-item ".concat(window.location.href.includes("/new-patient")?"":"selected"),onClick:function(){t("/user-selector")},children:Object(w.jsx)(Pe.a,{})}),e.user.data.patients&&Array.isArray(e.user.data.patients)?Object(w.jsx)("div",{className:"navbar-item ".concat(window.location.href.includes("new-patient")?"selected":""),onClick:function(){t("/new-patient")},children:Object(w.jsx)(Ie.a,{})}):null,Object(w.jsx)("div",{className:"navbar-item",onClick:function(){t("/logout")},children:Object(w.jsx)(Re.a,{})})]})})));var qe=function(){return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(Te,{}),Object(w.jsxs)("div",{className:"appContent",children:[Object(w.jsx)(o.b,{exact:!0,path:"/",component:function(){return Object(w.jsx)(o.a,{to:"/login"})}}),Object(w.jsx)(U,{exact:!0,path:"/user-selector",component:_}),Object(w.jsx)(U,{path:"/doctor-profile/:id",component:ee}),Object(w.jsx)(U,{path:"/patient-profile/:id",component:Oe}),Object(w.jsx)(U,{path:"/patient-details/:id",component:De}),Object(w.jsx)(U,{path:"/new-patient",component:z}),Object(w.jsx)(E,{exact:!0,path:"/signup",component:R}),Object(w.jsx)(E,{exact:!0,path:"/login",component:P}),Object(w.jsx)(o.b,{exact:!0,path:"/logout",component:L})]})]})},ze=n(38),Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,165)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),s(e),c(e)}))};c.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(ze.a,{children:Object(w.jsx)(M,{children:Object(w.jsx)(qe,{})})})}),document.getElementById("root")),Ee()},63:function(e,t,n){},77:function(e,t,n){}},[[131,1,2]]]);
//# sourceMappingURL=main.41f0cc4d.chunk.js.map